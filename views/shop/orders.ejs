<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../layouts/head.ejs') %>
</head>

<body>

<%- include('../layouts/nav.ejs') %>

<div class="container pt-100">
      <div class="row mt-3">

            <div class="col-md-12">
                  <% if (orders.length > 0) { %>

                        <% orders.forEach((order) => { %>
                              <div class="card mt-4 border border-dark border-2 " style="margin-bottom:5rem;">

                                    <div class="card-header">
                                        Order id:#  <%= order.id%>
                                    </div>
                                    <div class="card-body">

                                        <table class="table">

                                            <thead>
                                                <tr>
                                                    <th scope="col">Image</th>
                                                    <th scope="col">Name</th>
                                                    <th scope="col">Price</th>
                                                    <th scope="col">Quantity</th>
                                                </tr>
                                            </thead>

                                            <tbody>

                                            <% order.products.forEach((product) => { %>
                                                <tr>

                                                    <td>
                                                        <img src="/img/<%= product.imageUrl%>" width="80" alt="">
                                                    </td>
                                                    <td><%= product.name %></td>
                                                    <td><%= product.orderItem.price%></td>
                                                    <td><%= product.orderItem.quantity%></td>
                                                </tr>
                                            <% } ) %>

                                            </tbody>

                                        </table>


                                    </div>


                                      <table class="table">

                                      <tr>
                                          <td colspan="2"><%= order.createdAt.toDateString()%></td>
                                          <td >
                                              <% let total=0%>
                                              <% order.products.forEach((product) => { %>
                                                  <% product %>
                                                  <% total += (product.price * product.orderItem.quantity) %>

                                              <% })%>
                                          </td>
                                          <td style="font-weight: bolder" class="text-center table-success">

                                              Toplam :   <%=  total %>TL

                                          </td>
                                      </tr>

                                      </table>





                              </div>
                        <% })%>

                  <% } else { %>

                        <h1>Herhangi bir sipari≈ü yok...</h1>

                  <% }%>
            </div>
      </div>
</div>


<%- include('../layouts/footer.ejs') %>